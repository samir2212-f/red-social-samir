<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reels - Mi Red Social</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
      background: black;
      font-family: Arial, sans-serif;
    }
    .reel-container {
      height: 100vh;
      width: 100%;
      overflow-y: scroll;
      scroll-snap-type: y mandatory;
    }
    .reel {
      height: 100vh;
      width: 100%;
      scroll-snap-align: start;
      display: flex;
      justify-content: center;
      align-items: center;
      background: black;
    }
    video, img {
      max-height: 100%;
      max-width: 100%;
    }
    .upload-box {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.1);
      padding: 10px;
      border-radius: 10px;
      z-index: 1000;
    }
    .upload-box input {
      color: white;
    }
  </style>
</head>
<body>
  <!-- Caja de subir archivos -->
  <div class="upload-box">
    <input type="file" id="fileInput" accept="video/*,image/*">
    <button onclick="uploadFile()">Publicar</button>
  </div>

  <!-- Contenedor de reels -->
  <div class="reel-container" id="reelContainer">
    <!-- AquÃ­ se insertan los reels -->
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.7/axios.min.js"></script>
  <script>
    const cloudName = "dbgpwpwrb"; // ðŸ‘ˆ tu cloud name
    const uploadPreset = "Mis_reels"; // ðŸ‘ˆ tu upload preset

    async function uploadFile() {
      const fileInput = document.getElementById("fileInput");
      const file = fileInput.files[0];
      if (!file) {
        alert("Selecciona un archivo primero");
        return;
      }

      const formData = new FormData();
      formData.append("file", file);
      formData.append("upload_preset", uploadPreset);

      try {
        const res = await axios.post(`https://api.cloudinary.com/v1_1/${cloudName}/upload`, formData);
        addReel(res.data.secure_url, file.type);
      } catch (err) {
        alert("Error al subir el archivo");
        console.error(err);
      }
    }

    function addReel(url, type) {
      const container = document.getElementById("reelContainer");
      const reel = document.createElement("div");
      reel.classList.add("reel");

      if (type.startsWith("video")) {
        reel.innerHTML = `<video src="${url}" controls autoplay loop muted></video>`;
      } else {
        reel.innerHTML = `<img src="${url}" alt="reel">`;
      }

      container.insertBefore(reel, container.firstChild);
    }
  </script>
</body>
</html>
